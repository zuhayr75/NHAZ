import{_ as u,I as f,c as n,a as s,t as l,F as y,r as p,b as g,d as m,o as i,e as _}from"./index-e1aZk3FH.js";const B={name:"SearchPage",components:{InfoCard:f},data(){return{businesses:[],filteredBusinesses:[],searchQuery:"",loading:!1,error:null}},watch:{"$route.query.query":{handler(r){this.searchQuery=r||"",this.searchQuery?this.performSearch():this.filteredBusinesses=[]},immediate:!0}},methods:{async fetchBusinesses(){this.loading=!0,this.error=null;try{const r=await g.get("http://217.154.124.75:5270/api/CertifiedBusiness");this.businesses=r.data,this.filterBusinesses()}catch(r){this.error="Failed to load businesses. Please try again.",console.error("Error fetching businesses:",r)}finally{this.loading=!1}},performSearch(){this.businesses.length===0?this.fetchBusinesses():this.filterBusinesses()},filterBusinesses(){if(!this.searchQuery){this.filteredBusinesses=[];return}const r=this.searchQuery.toLowerCase().trim();this.filteredBusinesses=this.businesses.filter(e=>{const d=e.name&&e.name.toLowerCase().includes(r),h=e.type&&e.type.toLowerCase().includes(r),t=e.description&&e.description.toLowerCase().includes(r),o=e.location&&e.location.toLowerCase().includes(r),c=e.address&&e.address.toLowerCase().includes(r);return d||h||t||o||c})}},mounted(){this.searchQuery=this.$route.query.query||"",this.searchQuery&&this.performSearch()}},v={class:"search-page"},k={class:"container"},C={key:0,class:"loading-container"},S={key:1,class:"error-container"},w={class:"error-text"},Q={key:2,class:"no-results"},x={class:"no-results-text"},L={key:3,class:"search-results"},b={class:"results-count"},q={class:"results-grid"},I={key:4,class:"initial-state"};function M(r,e,d,h,t,o){const c=m("InfoCard");return i(),n("div",v,[s("div",k,[e[6]||(e[6]=s("div",{class:"search-header"},[s("h1",{class:"search-title"},"Search Results")],-1)),t.loading?(i(),n("div",C,e[1]||(e[1]=[s("div",{class:"loading-spinner"},null,-1),s("p",{class:"loading-text"},"Searching...",-1)]))):t.error?(i(),n("div",S,[e[2]||(e[2]=s("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),s("p",w,l(t.error),1),s("button",{onClick:e[0]||(e[0]=(...a)=>o.performSearch&&o.performSearch(...a)),class:"retry-button"},"Try Again")])):!t.loading&&t.filteredBusinesses.length===0&&t.searchQuery?(i(),n("div",Q,[e[3]||(e[3]=s("div",{class:"no-results-icon"},"üîç",-1)),e[4]||(e[4]=s("h3",{class:"no-results-title"},"No results found",-1)),s("p",x,` We couldn't find any businesses matching "`+l(t.searchQuery)+'". Try different keywords or check the spelling. ',1)])):t.filteredBusinesses.length>0?(i(),n("div",L,[s("div",b," Found "+l(t.filteredBusinesses.length)+" result"+l(t.filteredBusinesses.length===1?"":"s"),1),s("div",q,[(i(!0),n(y,null,p(t.filteredBusinesses,a=>(i(),_(c,{key:a.id,info:a},null,8,["info"]))),128))])])):(i(),n("div",I,e[5]||(e[5]=[s("div",{class:"initial-icon"},"üîç",-1),s("h3",{class:"initial-title"},"Search for businesses",-1),s("p",{class:"initial-text"}," Use the search bar above to find certified businesses by name, type, or location. ",-1)])))])])}const P=u(B,[["render",M],["__scopeId","data-v-ea605796"]]);export{P as default};
